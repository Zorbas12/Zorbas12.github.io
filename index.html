<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>https://www.zorbas.com.cy/wp-content/uploads/cropped-zorbas-favicon-01-180x180.png Φούρνοι Ζορπάς</title>
<style>
/* ... your unchanged CSS ... */
body {margin:0;font-family:Arial,sans-serif;background-color:#DAD9D7;position:relative;height:100vh;overflow-x:hidden;}
#mainFormSection,#adminGuiSection,#submissionsGuiSection,#storeMenuSection,#storeSubmissionsSection,#usersGuiSection{display:none;flex-direction:column;align-items:center;justify-content:center;height:100vh;}
.language-switcher{position:absolute;top:10px;right:10px;display:flex;gap:10px;}
.language-switcher button{padding:5px 10px;font-size:14px;border-radius:5px;border:1px solid #ccc;cursor:pointer;background-color:#E4D882;font-weight:bold;}
.language-switcher button:hover{background-color:#CFC76D;}
h1{font-family:'Algerian',serif;font-size:48px;color:#333;margin-bottom:30px;text-align:center;}
form,#adminGuiSection .admin-gui-box,#submissionsGuiSection .console-box,#usersGuiSection .users-gui-box{display:flex;flex-direction:column;gap:20px;text-align:center;}
form,#adminGuiSection .admin-gui-box,#usersGuiSection .users-gui-box{background-color:#fff;padding:30px;border-radius:15px;width:350px;box-shadow:0 0 10px rgba(0,0,0,0.1);}
form>div,#adminGuiSection .admin-gui-box>div,#submissionsGuiSection>div,#usersGuiSection .users-gui-box>div{display:flex;flex-direction:column;align-items:center;justify-content:center;}
label{font-weight:bold;margin-bottom:5px;}
input,select,button{padding:10px;font-size:16px;border-radius:8px;border:1px solid #ccc;width:80%;box-sizing:border-box;}
button[type="submit"]{background-color:#E4D882;font-weight:bold;}
button[type="submit"]:hover{background-color:#CFC76D;}
.admin-buttons{position:fixed;bottom:20px;right:20px;display:none;gap:10px;}
.admin-buttons button{padding:10px 15px;font-size:14px;border-radius:5px;border:1px solid #ccc;cursor:pointer;background-color:#E4D882;font-weight:bold;}
.admin-buttons button:hover{background-color:#CFC76D;}
.success-message{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#4BB543;color:white;padding:25px 40px;border-radius:12px;font-size:20px;font-weight:bold;box-shadow:0 0 15px rgba(0,0,0,0.2);opacity:0;pointer-events:none;transition:opacity 0.5s ease;z-index:1005;}
.success-message.show{opacity:1;pointer-events:auto;}
#adminGuiSection,#storeMenuSection,#storeSubmissionsSection,#usersGuiSection{position:fixed;top:0;left:0;width:100%;height:100vh;background-color:rgba(0,0,0,0.1);align-items:center;justify-content:center;z-index:1003;}
#submissionsGuiSection{flex-direction:column;align-items:center;justify-content:flex-start;width:100%;padding:20px;background-color:#DAD9D7;min-height:100vh;box-sizing:border-box;z-index:1001;}
#adminGuiSection .admin-gui-box,#usersGuiSection .users-gui-box{background-color:#fff;padding:40px 60px;border-radius:15px;display:flex;flex-direction:column;align-items:center;gap:25px;box-shadow:0 5px 20px rgba(0,0,0,0.2);text-align:center;}
#adminGuiSection .admin-gui-box h1,#usersGuiSection .users-gui-box h1{font-size:36px;margin-bottom:20px;}
#adminGuiSection .admin-gui-box button,#usersGuiSection .users-gui-box button{width:250px;padding:15px 0;font-size:18px;border-radius:10px;border:none;cursor:pointer;background-color:#E4D882;font-weight:bold;transition:0.3s;}
#adminGuiSection .admin-gui-box button:hover,#usersGuiSection .users-gui-box button:hover{background-color:#CFC76D;}
#adminGuiSection #backBtn,#submissionsGuiSection #backFromSubmissionsBtn,#storeMenuSection #backFromStoreMenuBtn,#storeSubmissionsSection #backFromStoreSubmissionsBtn,#usersGuiSection #backFromUsersBtn{background-color:#FF5C5C;color:white;width:auto;padding:10px 25px;font-size:16px;border-radius:8px;}
#adminGuiSection #backBtn:hover,#submissionsGuiSection #backFromSubmissionsBtn:hover,#storeMenuSection #backFromStoreMenuBtn:hover,#storeSubmissionsSection #backFromStoreSubmissionsBtn:hover,#usersGuiSection #backFromUsersBtn:hover{background-color:#E04B4B;}
#submissionsList,#storeSubmissionsList,#usersList{display:flex;flex-direction:column;gap:10px;width:100%;max-width:400px;margin:0 auto;}
#storeButtonsDiv{flex:1;display:flex;flex-direction:column;gap:10px;align-items:center;margin-right:20px;overflow-y:auto;overflow-x:hidden;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;background:transparent;border-radius:8px;max-height:80vh;width:200px;}
.store-button{flex:0 0 auto;width:180px;height:50px;border-radius:8px;border:none;background:#E4D882;display:flex;align-items:center;justify-content:center;font-weight:bold;cursor:pointer;}
.store-button:hover{background:#CFC76D;}
#submissionsList div,#storeSubmissionsList div{display:flex;flex-direction:column;gap:5px;background:#fff;padding:15px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);width:100%;}
#submissionsList div button.acceptBtn{background-color:#4BB543;color:white;border:none;padding:10px;border-radius:5px;flex:1;font-weight:bold;cursor:pointer;}
#submissionsList div button.declineBtn{background-color:#FF5C5C;color:white;border:none;padding:10px;border-radius:5px;flex:1;font-weight:bold;cursor:pointer;}
#submissionsList div button.acceptBtn:hover{background:#3D9737;}
#submissionsList div button.declineBtn:hover{background:#E04B4B;}
@media (max-width:640px){h1{font-size:34px;}#mainFormSection form, #adminGuiSection .admin-gui-box,#usersGuiSection .users-gui-box{width:90%;}#storeButtonsDiv{width:90%;}.store-button{width:100%;}}
</style>
</head>
<body>
<div class="language-switcher">
  <button id="englishBtn">English</button>
  <button id="greekBtn">Greek</button>
</div>

<div id="mainFormSection">
  <h1>Zorbas Submissions</h1>
  <form id="submissionForm">
    <div>
      <label for="name" id="nameLabel"><strong>Name</strong></label>
      <input type="text" id="name" required placeholder="Enter your name">
    </div>
    <div>
      <label for="month" id="monthLabel">Month</label>
      <select id="month" required><option value="">Select Month</option></select>
    </div>
    <div>
      <label for="day" id="dayLabel"><strong>Day</strong></label>
      <input type="text" id="day" class="type-input" placeholder="Type day" required>
    </div>
    <div>
      <label for="shift" id="shiftLabel">Shift</label>
      <select id="shift" required><option value="">Select Shift</option></select>
    </div>
    <div>
      <label for="store" id="storeLabel">Store</label>
      <select id="store" required><option value="">Select Store</option></select>
    </div>
    <div>
      <button type="submit" id="submitBtn">Submit</button>
    </div>
  </form>
</div>
<div id="adminGuiSection">
  <div class="admin-gui-box">
    <h1>Admin GUI</h1>
    <button id="seeAllBtn">See All Submissions</button>
    <button id="resetAllBtn">Reset All Submissions</button>
    <button id="usersGuiBtn">Users</button>
    <button id="backBtn">Back</button>
  </div>
</div>

<div id="usersGuiSection">
  <div class="users-gui-box">
    <h1>Manage Users</h1>
    <div id="usersList"></div>
    <button id="backFromUsersBtn">Back</button>
  </div>
</div>

<div id="submissionsGuiSection">
  <h1>Pending Submissions</h1>
  <div id="submissionsList"></div>
  <button id="backFromSubmissionsBtn">Back</button>
</div>

<div id="storeMenuSection">
  <h1>Select Store</h1>
  <div id="storeButtonsDiv" role="toolbar" aria-label="Store letters"></div>
  <button id="backFromStoreMenuBtn">Back</button>
</div>

<div id="storeSubmissionsSection">
  <h1 id="storeTitle"></h1>
  <div id="storeSubmissionsList"></div>
  <button id="backFromStoreSubmissionsBtn">Back</button>
</div>

<div class="admin-buttons" id="adminButtons">
  <button id="adminGuiBtn">Admin GUI</button>
</div>

<div class="success-message" id="successMessage">You have successfully submitted!</div>

<!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
import { getDatabase, ref, set, push, get, child, update } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyD_2QiORiAdBpfLe9Dzxv6KJX46HLqbALc",
  authDomain: "zorbas12.firebaseapp.com",
  databaseURL: "https://zorbas12-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "zorbas12",
  storageBucket: "zorbas12.appspot.com",
  messagingSenderId: "643468962153",
  appId: "1:643468962153:web:20695d324d8fd0abd635f8",
  measurementId: "G-84Q60WY6FC"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// ------------------ DOM Elements ------------------
const monthSelect = document.getElementById('month');
const shiftSelect = document.getElementById('shift');
const storeSelect = document.getElementById('store');
const dayInput = document.getElementById('day');
const mainFormSection = document.getElementById('mainFormSection');
const adminGuiSection = document.getElementById('adminGuiSection');
const usersGuiSection = document.getElementById('usersGuiSection');
const submissionsGuiSection = document.getElementById('submissionsGuiSection');
const storeMenuSection = document.getElementById('storeMenuSection');
const storeSubmissionsSection = document.getElementById('storeSubmissionsSection');
const adminButtonsDiv = document.getElementById('adminButtons');
const successMessage = document.getElementById('successMessage');
const submissionsListDiv = document.getElementById('submissionsList');
const storeButtonsDiv = document.getElementById('storeButtonsDiv');
const storeSubmissionsList = document.getElementById('storeSubmissionsList');
const usersListDiv = document.getElementById('usersList');

// ------------------ Device/User Setup ------------------
let deviceId = localStorage.getItem('deviceId');
if (!deviceId) {
  deviceId = (Math.floor(Math.random() * 900000000) + 100000000).toString();
  localStorage.setItem('deviceId', deviceId);
}

let deviceName = localStorage.getItem('deviceName') || "Unknown";
localStorage.setItem('deviceName', deviceName);

// Store user in Firebase if not exists
const userRef = ref(db, `users/${deviceId}`);
get(userRef).then(snapshot => {
  if (!snapshot.exists()) {
    set(userRef, { name: deviceName, type: navigator.userAgent.includes("Mobile") ? "phone" : "pc", role: "user" });
  }
});

// ------------------ Show Sections ------------------
function showSection(section){
  mainFormSection.style.display='none';
  adminGuiSection.style.display='none';
  submissionsGuiSection.style.display='none';
  storeMenuSection.style.display='none';
  storeSubmissionsSection.style.display='none';
  usersGuiSection.style.display='none';
  section.style.display='flex';
}

// ------------------ Submission ------------------
document.getElementById('submissionForm').addEventListener('submit', async e => {
  e.preventDefault();
  if(e.target.checkValidity()){
    const submission = {
      name: document.getElementById('name').value,
      month: monthSelect.value,
      day: dayInput.value,
      shift: shiftSelect.value,
      store: storeSelect.value,
      userId: deviceId,
      status: "pending"
    };
    const submissionsRef = ref(db, 'submissions');
    const newSubRef = push(submissionsRef);
    await set(newSubRef, submission);
    successMessage.classList.add('show');
    setTimeout(()=>successMessage.classList.remove('show'),3000);
    e.target.reset();
    renderSubmissions();
  }
});

// ------------------ Render Submissions ------------------
async function renderSubmissions(){
  submissionsListDiv.innerHTML = '';
  const snapshot = await get(ref(db, 'submissions'));
  if(snapshot.exists()){
    const submissions = snapshot.val();
    for(const key in submissions){
      const sub = submissions[key];
      // Show only own submissions or if admin
      const userSnap = await get(ref(db, `users/${deviceId}`));
      const role = userSnap.val()?.role;
      if(sub.userId !== deviceId && role !== "admin") continue;

      const subDiv = document.createElement('div');
      subDiv.innerHTML = `
        <p><strong>Name:</strong> ${sub.name}</p>
        <p><strong>Month:</strong> ${sub.month}</p>
        <p><strong>Day:</strong> ${sub.day}</p>
        <p><strong>Shift:</strong> ${sub.shift}</p>
        <p><strong>Store:</strong> ${sub.store}</p>
      `;
      submissionsListDiv.appendChild(subDiv);
    }
  }
}

renderSubmissions();
</script>
<script type="module">
import { getDatabase, ref, update, get, child } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";

const db = getDatabase(app);

// ------------------ Admin Buttons ------------------
function updateAdminButtonsVisibility() {
  get(ref(db, `users/${deviceId}`)).then(snapshot => {
    if(snapshot.exists() && snapshot.val().role === "admin"){
      adminButtonsDiv.style.display = 'flex';
    } else {
      adminButtonsDiv.style.display = 'none';
    }
  });
}

updateAdminButtonsVisibility();

// ------------------ Accept/Decline ------------------
async function handleAction(subId, action){
  const subRef = ref(db, `submissions/${subId}`);
  await update(subRef, { status: action });
  renderSubmissions();
}

// ------------------ See All Submissions / Store Letters ------------------
document.getElementById('seeAllBtn').addEventListener('click', async ()=>{
  storeButtonsDiv.innerHTML='';
  for(let i=65;i<=90;i++){
    const letter = String.fromCharCode(i);
    const btn = document.createElement('button');
    btn.className='store-button';
    btn.innerText = letter;
    btn.onclick = async ()=>{
      storeSubmissionsList.innerHTML='';
      const snapshot = await get(ref(db, 'submissions'));
      if(snapshot.exists()){
        const submissions = snapshot.val();
        for(const key in submissions){
          const sub = submissions[key];
          if(sub.store !== letter) continue;

          const subDiv = document.createElement('div');
          subDiv.innerHTML = `
            <p><strong>Name:</strong> ${sub.name}</p>
            <p><strong>Month:</strong> ${sub.month}</p>
            <p><strong>Day:</strong> ${sub.day}</p>
            <p><strong>Shift:</strong> ${sub.shift}</p>
            <p><strong>Store:</strong> ${sub.store}</p>
          `;

          const btnContainer = document.createElement('div');
          btnContainer.style.display='flex';
          btnContainer.style.gap='10px';

          const acceptBtn = document.createElement('button');
          acceptBtn.innerText='Accept';
          acceptBtn.style.flex='1';
          acceptBtn.onclick = ()=>handleAction(key,'accepted');

          const declineBtn = document.createElement('button');
          declineBtn.innerText='Decline';
          declineBtn.style.flex='1';
          declineBtn.onclick = ()=>handleAction(key,'declined');

          btnContainer.appendChild(acceptBtn);
          btnContainer.appendChild(declineBtn);
          subDiv.appendChild(btnContainer);
          storeSubmissionsList.appendChild(subDiv);
        }
      }
      showSection(storeSubmissionsSection);
    };
    storeButtonsDiv.appendChild(btn);
  }
  showSection(storeMenuSection);
});

// ------------------ Reset All ------------------
document.getElementById('resetAllBtn').addEventListener('click', async ()=>{
  const snapshot = await get(ref(db, 'submissions'));
  if(snapshot.exists()){
    const submissions = snapshot.val();
    for(const key in submissions){
      await update(ref(db, `submissions/${key}`), { status: "pending" });
    }
  }
  renderSubmissions();
});

// ------------------ Back Buttons ------------------
document.getElementById('adminGuiBtn').addEventListener('click',()=>showSection(adminGuiSection));
document.getElementById('backBtn').addEventListener('click',()=>showSection(mainFormSection));
document.getElementById('backFromSubmissionsBtn').addEventListener('click',()=>showSection(adminGuiSection));
document.getElementById('backFromStoreMenuBtn').addEventListener('click',()=>showSection(adminGuiSection));
document.getElementById('backFromStoreSubmissionsBtn').addEventListener('click',()=>showSection(storeMenuSection));

// ------------------ Render Users / Manage Roles ------------------
async function renderUsers(){
  usersListDiv.innerHTML='';
  const snapshot = await get(ref(db, 'users'));
  if(snapshot.exists()){
    const users = snapshot.val();
    for(const id in users){
      const data = users[id];
      const box = document.createElement('div');
      box.style.background='#fff';
      box.style.padding='15px';
      box.style.borderRadius='10px';
      box.style.marginBottom='10px';
      box.style.display='flex';
      box.style.flexDirection='column';
      box.style.alignItems='flex-start';

      const nameP = document.createElement('p');
      nameP.innerHTML = `<strong>${data.name}</strong>`;
      const typeP = document.createElement('p');
      typeP.innerHTML = `Device: ${data.type || 'Unknown'}`;
      const roleP = document.createElement('p');
      roleP.innerHTML = `Role: ${data.role || 'none'}`;

      const btnContainer = document.createElement('div');
      btnContainer.style.marginTop='10px';
      btnContainer.style.display='flex';
      btnContainer.style.gap='10px';

      const userBtn = document.createElement('button');
      userBtn.innerText='User';
      userBtn.onclick = async ()=>{
        await update(ref(db, `users/${id}`), { role: "user" });
        renderUsers();
        updateAdminButtonsVisibility();
      };

      const adminBtn = document.createElement('button');
      adminBtn.innerText='Admin';
      adminBtn.onclick = async ()=>{
        await update(ref(db, `users/${id}`), { role: "admin" });
        renderUsers();
        updateAdminButtonsVisibility();
      };

      btnContainer.appendChild(userBtn);
      btnContainer.appendChild(adminBtn);
      box.appendChild(nameP);
      box.appendChild(typeP);
      box.appendChild(roleP);
      box.appendChild(btnContainer);
      usersListDiv.appendChild(box);
    }
  }
}

document.getElementById('usersGuiBtn').addEventListener('click',()=>{
  renderUsers();
  showSection(usersGuiSection);
});

// ------------------ Language Switching ------------------
const englishBtn = document.getElementById('englishBtn');
const greekBtn = document.getElementById('greekBtn');

const translations = {
  english:{ /* same as your original english object */ },
  greek:{ /* same as your original greek object */ }
};

function setLanguage(lang){
  // update labels/buttons as before
}

englishBtn.addEventListener('click',()=>setLanguage('english'));
greekBtn.addEventListener('click',()=>setLanguage('greek'));
setLanguage('english');

</script>
</body>
</html>
